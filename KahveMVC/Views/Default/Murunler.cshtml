@using KahveMVC.Models.EntityFramework
@using KahveMVC.Controllers  @model List<urunler> 


@{
    ViewBag.Title = "Menü";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

<style>
    /* Genel Alan */
    .slider-container {
        position: relative;
        width: 100%;
        padding-top: 50px;
        padding-bottom: 50px;
        overflow: hidden;
    }

    .swiper {
        width: 100%;
        padding-bottom: 50px; /* Alttaki butonlar kesilmesin diye boşluk */
    }

    /* Kart Yapısı */
    .swiper-slide {
        width: 500px; /* ESKİSİ 300px İDİ, ŞİMDİ DAHA GENİŞ */
        display: flex;
        flex-direction: column;
        align-items: center;
        opacity: 0.4;
        transform: scale(0.85); /* Pasifken biraz daha büyük dursun */
        transition: all 0.3s ease;
    }

        /* Resim Stili - Genişliğe uyum sağlaması için */
        .swiper-slide img {
            width: 100%;
            height: 350px; /* Yüksekliği ellemedim, istersen artırabilirsin */
            object-fit: cover;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }

    /* AKTİF OLAN KART (ORTADAKİ) */
    .swiper-slide-active {
        opacity: 1 !important;
        transform: scale(1.1) !important; /* Biraz büyüsün */
        z-index: 10;
    }




    /* Ürün Bilgileri (Sadece aktifken net görünsün) */
    .urun-bilgi {
        text-align: center;
        margin-top: 15px;
        opacity: 0; /* Başta gizli */
        transition: opacity 0.3s ease;
    }

    .swiper-slide-active .urun-bilgi {
        opacity: 1; /* Sadece ortadayken bilgi gözüksün */
    }

    /* OKLARIN AYARI (RESMİN DİBİNE YAPIŞTIRMA) */
    .swiper-button-next, .swiper-button-prev {
        color: #6F4E37; /* Kahve tonu */
        background: rgba(255, 255, 255, 0.8);
        width: 45px;
        height: 45px;
        border-radius: 50%;
        font-weight: bold;
        z-index: 20;
    }

    /* Ekranın ortasına göre ayarlama */
    .swiper-button-prev {
        left: calc(50% - 600px) !important; /* Ortadan 200px sola git (resmin dibi) */
    }

    .swiper-button-next {
        right: calc(50% - 600px) !important; /* Ortadan 200px sağa git */
    }

    /* Mobilde okları kenara al ki resim kapanmasın */
    @@media (max-width: 768px) {
        .swiper-button-prev {
            left: 10px !important;
        }

        .swiper-button-next {
            right: 10px !important;
        }
    }
</style>

<div class="container-fluid py-4">

    <div class="text-center mb-2">
        <h2 style="color: #6F4E37; font-weight: bold;">☕ MENÜMÜZ</h2>
        <p class="text-muted">Sağa sola kaydırarak ürünleri inceleyebilirsiniz.</p>

        <a href="/Sepet/Index" class="btn btn-outline-dark mb-3">
            🛒 Sepete Git
            @if (Session["Sepet"] != null)
            {
                <span class="badge bg-danger text-white">@(((List<KahveMVC.Models.SepetUrun>)Session["Sepet"]).Count)</span>
            }
        </a>
    </div>

    <div class="slider-container">
        <div class="swiper mySwiper">
            <div class="swiper-wrapper">

                @foreach (var urun in Model)
                {
                    <div class="swiper-slide">
                        <img src="~/Content/img/@urun.foto" alt="@urun.baslik">

                        <div class="urun-bilgi">
                            <h5 style="font-weight:bold; color:#333;">@urun.baslik</h5>
                            <h4 class="text-success">@urun.Fiyat ₺</h4>

                            <div class="mt-2">
                                <a href="/Sepet/SepeteEkle/@urun.id" class="btn btn-warning text-white btn-sm">
                                    🛒 Sepete Ekle
                                </a>
                                <a href="@Url.Action("UrunDetay", "Default", new { id = urun.id, baslik = Turkce.AdresDuzenle(urun.baslik) })" class="btn btn-info text-white btn-sm">
                                    📄 İncele
                                </a>
                            </div>
                        </div>
                    </div>
                }

            </div>
        </div>

        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<script>
    var swiper = new Swiper(".mySwiper", {
        effect: "coverflow",
        grabCursor: true,
        centeredSlides: true, // Ortada dursun
        slidesPerView: "auto",

        loop: false, // İŞTE BURASI: Loop kapalı, başa ve sona gelince durur.

        coverflowEffect: {
            rotate: 0,
            stretch: 0,
            depth: 100,
            modifier: 2,
            slideShadows: false,
        },
        navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
        },
        keyboard: {
            enabled: true,
        },
        // Sona gelince oklar soluklaşsın diye bu sınıfı kullanabilirsin (Swiper kendi yapar)
    });
</script>